{"ast":null,"code":"const jsonifyForm = form => {\n  const formKeyNodes = form.querySelectorAll('.field > :nth-child(1):not(.submit)');\n  const formValNodes = form.querySelectorAll('.field > :nth-child(2):not(.password-subfield), .password-subfield > :nth-child(1)');\n  const jsonifiedForm = {};\n  for (var i = 0; i < formKeyNodes.length; i++) jsonifiedForm[formKeyNodes[i].textContent] = formValNodes[i].value;\n  return jsonifiedForm;\n};\nconst onsubmitHandler = (e, path, method, onfulfilled, onrejected) => {\n  e.preventDefault();\n  const form = e.target;\n  const formData = jsonifyForm(form);\n  const req = {\n    method: method\n  };\n  if (method === 'POST') {\n    req.headers = {\n      'Content-Type': 'application/json'\n    };\n    req.body = JSON.stringify(formData);\n  }\n  fetch(`https://weak-puce-toad-garb.cyclic.app${path}${method === 'GET' ? `emails/${formData.Email}/passwords/${formData.Password}` : ''}`, req).then(onfulfilled, onrejected).catch(error => console.log(error));\n};\nexport default onsubmitHandler;","map":{"version":3,"names":["jsonifyForm","form","formKeyNodes","querySelectorAll","formValNodes","jsonifiedForm","i","length","textContent","value","onsubmitHandler","e","path","method","onfulfilled","onrejected","preventDefault","target","formData","req","headers","body","JSON","stringify","fetch","Email","Password","then","catch","error","console","log"],"sources":["/Users/benbavar/jcbenny/src/lib/onsubmitHandler.js"],"sourcesContent":["const jsonifyForm = (form) => {\n  const formKeyNodes = form.querySelectorAll(\n    '.field > :nth-child(1):not(.submit)'\n  );\n  const formValNodes = form.querySelectorAll(\n    '.field > :nth-child(2):not(.password-subfield), .password-subfield > :nth-child(1)'\n  );\n\n  const jsonifiedForm = {};\n  for (var i = 0; i < formKeyNodes.length; i++)\n    jsonifiedForm[formKeyNodes[i].textContent] = formValNodes[i].value;\n\n  return jsonifiedForm;\n};\n\nconst onsubmitHandler = (e, path, method, onfulfilled, onrejected) => {\n  e.preventDefault();\n\n  const form = e.target;\n  const formData = jsonifyForm(form);\n\n  const req = {\n    method: method,\n  };\n\n  if (method === 'POST') {\n    req.headers = { 'Content-Type': 'application/json' };\n    req.body = JSON.stringify(formData);\n  }\n\n  fetch(\n    `https://weak-puce-toad-garb.cyclic.app${path}${\n      method === 'GET'\n        ? `emails/${formData.Email}/passwords/${formData.Password}`\n        : ''\n    }`,\n    req\n  )\n    .then(onfulfilled, onrejected)\n    .catch((error) => console.log(error));\n};\n\nexport default onsubmitHandler;\n"],"mappings":"AAAA,MAAMA,WAAW,GAAIC,IAAI,IAAK;EAC5B,MAAMC,YAAY,GAAGD,IAAI,CAACE,gBAAgB,CACxC,qCACF,CAAC;EACD,MAAMC,YAAY,GAAGH,IAAI,CAACE,gBAAgB,CACxC,oFACF,CAAC;EAED,MAAME,aAAa,GAAG,CAAC,CAAC;EACxB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,YAAY,CAACK,MAAM,EAAED,CAAC,EAAE,EAC1CD,aAAa,CAACH,YAAY,CAACI,CAAC,CAAC,CAACE,WAAW,CAAC,GAAGJ,YAAY,CAACE,CAAC,CAAC,CAACG,KAAK;EAEpE,OAAOJ,aAAa;AACtB,CAAC;AAED,MAAMK,eAAe,GAAGA,CAACC,CAAC,EAAEC,IAAI,EAAEC,MAAM,EAAEC,WAAW,EAAEC,UAAU,KAAK;EACpEJ,CAAC,CAACK,cAAc,CAAC,CAAC;EAElB,MAAMf,IAAI,GAAGU,CAAC,CAACM,MAAM;EACrB,MAAMC,QAAQ,GAAGlB,WAAW,CAACC,IAAI,CAAC;EAElC,MAAMkB,GAAG,GAAG;IACVN,MAAM,EAAEA;EACV,CAAC;EAED,IAAIA,MAAM,KAAK,MAAM,EAAE;IACrBM,GAAG,CAACC,OAAO,GAAG;MAAE,cAAc,EAAE;IAAmB,CAAC;IACpDD,GAAG,CAACE,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACL,QAAQ,CAAC;EACrC;EAEAM,KAAK,CACF,yCAAwCZ,IAAK,GAC5CC,MAAM,KAAK,KAAK,GACX,UAASK,QAAQ,CAACO,KAAM,cAAaP,QAAQ,CAACQ,QAAS,EAAC,GACzD,EACL,EAAC,EACFP,GACF,CAAC,CACEQ,IAAI,CAACb,WAAW,EAAEC,UAAU,CAAC,CAC7Ba,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;AACzC,CAAC;AAED,eAAenB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}