{"ast":null,"code":"var _jsxFileName = \"/Users/benbavar/jcbenny/src/pages/Sell.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport { useUser } from '../lib/useUser';\nimport MenuBar from '../components/MenuBar';\nimport Menu from '../components/Menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst onfulfilled = async res => {\n  // const card = document.querySelector('#sell > .card');\n  const body = document.getElementById('sell');\n  let imgBox = body.querySelector('.img-box');\n  if (imgBox.style.display === 'none') {\n    imgBox.style.display = 'block';\n    imgBox.animate([{\n      transform: 'scale(0)'\n    }, {\n      transform: 'scale(1)'\n    }], 3000);\n  }\n  const prevImg = imgBox.querySelector('img');\n  if (prevImg) prevImg.remove();\n  const img = document.createElement('img');\n  img.style.height = 'auto';\n  img.style.maxWidth = '100%';\n  img.src = await res.text();\n  imgBox.appendChild(img);\n  let btns = body.querySelectorAll('button');\n  const sendPromptBtn = btns[0];\n  const saleBtn = btns[1];\n  const h2 = body.querySelector('h2');\n  if (h2) {\n    h2.remove();\n    const input = body.querySelector('input');\n    const h4 = document.createElement('h4');\n    h4.textContent = 'Does this resemble the item you had in mind? If not, that may work to your advantage, actually. You want to sell this thing, not accurately represent it to shoppers. But if, for any reason, you want to change the picture, feel free to send another text prompt. Even the one you sent previously will generate a new image if resent.';\n    body.insertBefore(h4, input);\n    sendPromptBtn.textContent = 'Try again';\n    saleBtn.style.display = 'block';\n  }\n};\nconst sendOpenAIPrompt = (e, description, email) => {\n  fetch('https://weak-puce-toad-garb.cyclic.app/private/sell-something/make-pic', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      List: {\n        Description: description\n      },\n      Email: email\n    })\n  }).then(res => onfulfilled(res)).catch(error => console.log(error));\n};\nconst putItemUpForSale = (e, description, email) => {\n  const img = document.querySelector('#sell .img-box > img');\n  fetch('https://weak-puce-toad-garb.cyclic.app/private/sell-something/save-pic', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      List: {\n        Description: description,\n        ImgURL: img.src\n      },\n      Email: email\n    })\n  }).then(res => {\n    res.text().then(text => {\n      console.log(text);\n    });\n  }).catch(error => console.log(error));\n};\nconst Sell = () => {\n  _s();\n  useEffect(() => {\n    document.title = 'Sell something';\n  });\n  const menuRef = useRef(null);\n  const user = useUser();\n  const {\n    Email\n  } = user;\n  const [description, setDescription] = useState('');\n  return /*#__PURE__*/_jsxDEV(\"body\", {\n    id: \"sell\",\n    children: [/*#__PURE__*/_jsxDEV(MenuBar, {\n      menuRef: menuRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      ref: menuRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"What do you have to sell?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: description,\n      onChange: e => {\n        setDescription(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btn-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"submit\",\n        onClick: e => sendOpenAIPrompt(e, description, Email),\n        children: \"Sell\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          display: 'none'\n        },\n        className: \"submit\",\n        onClick: e => putItemUpForSale(e, description, Email),\n        children: \"Stick with this\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'none'\n      },\n      className: \"img-box\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(Sell, \"3c+xx1eotkRhJkVr5cbWupTk5bQ=\", false, function () {\n  return [useUser];\n});\n_c = Sell;\nexport default Sell;\nvar _c;\n$RefreshReg$(_c, \"Sell\");","map":{"version":3,"names":["useEffect","useRef","useState","useUser","MenuBar","Menu","jsxDEV","_jsxDEV","onfulfilled","res","body","document","getElementById","imgBox","querySelector","style","display","animate","transform","prevImg","remove","img","createElement","height","maxWidth","src","text","appendChild","btns","querySelectorAll","sendPromptBtn","saleBtn","h2","input","h4","textContent","insertBefore","sendOpenAIPrompt","e","description","email","fetch","method","headers","JSON","stringify","List","Description","Email","then","catch","error","console","log","putItemUpForSale","ImgURL","Sell","_s","title","menuRef","user","setDescription","id","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","value","onChange","target","className","onClick","_c","$RefreshReg$"],"sources":["/Users/benbavar/jcbenny/src/pages/Sell.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { useUser } from '../lib/useUser';\n\nimport MenuBar from '../components/MenuBar';\nimport Menu from '../components/Menu';\n\nconst onfulfilled = async (res) => {\n  // const card = document.querySelector('#sell > .card');\n  const body = document.getElementById('sell');\n  let imgBox = body.querySelector('.img-box');\n\n  if (imgBox.style.display === 'none') {\n    imgBox.style.display = 'block';\n    imgBox.animate(\n      [{ transform: 'scale(0)' }, { transform: 'scale(1)' }],\n      3000\n    );\n  }\n\n  const prevImg = imgBox.querySelector('img');\n  if (prevImg) prevImg.remove();\n\n  const img = document.createElement('img');\n  img.style.height = 'auto';\n  img.style.maxWidth = '100%';\n  img.src = await res.text();\n\n  imgBox.appendChild(img);\n\n  let btns = body.querySelectorAll('button');\n  const sendPromptBtn = btns[0];\n  const saleBtn = btns[1];\n\n  const h2 = body.querySelector('h2');\n  if (h2) {\n    h2.remove();\n\n    const input = body.querySelector('input');\n\n    const h4 = document.createElement('h4');\n    h4.textContent =\n      'Does this resemble the item you had in mind? If not, that may work to your advantage, actually. You want to sell this thing, not accurately represent it to shoppers. But if, for any reason, you want to change the picture, feel free to send another text prompt. Even the one you sent previously will generate a new image if resent.';\n    body.insertBefore(h4, input);\n\n    sendPromptBtn.textContent = 'Try again';\n    saleBtn.style.display = 'block';\n  }\n};\n\nconst sendOpenAIPrompt = (e, description, email) => {\n  fetch(\n    'https://weak-puce-toad-garb.cyclic.app/private/sell-something/make-pic',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        List: { Description: description },\n        Email: email,\n      }),\n    }\n  )\n    .then((res) => onfulfilled(res))\n    .catch((error) => console.log(error));\n};\n\nconst putItemUpForSale = (e, description, email) => {\n  const img = document.querySelector('#sell .img-box > img');\n  fetch(\n    'https://weak-puce-toad-garb.cyclic.app/private/sell-something/save-pic',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        List: { Description: description, ImgURL: img.src },\n        Email: email,\n      }),\n    }\n  )\n    .then((res) => {\n      res.text().then((text) => {\n        console.log(text);\n      });\n    })\n    .catch((error) => console.log(error));\n};\n\nconst Sell = () => {\n  useEffect(() => {\n    document.title = 'Sell something';\n  });\n  const menuRef = useRef(null);\n\n  const user = useUser();\n  const { Email } = user;\n\n  const [description, setDescription] = useState('');\n\n  return (\n    <body id='sell'>\n      <MenuBar menuRef={menuRef} />\n      <Menu ref={menuRef} />\n      {/* <div className='card'> */}\n      <h2>What do you have to sell?</h2>\n      <input\n        value={description}\n        onChange={(e) => {\n          setDescription(e.target.value);\n        }}\n      />\n      <div className='btn-box'>\n        <button\n          className='submit'\n          onClick={(e) => sendOpenAIPrompt(e, description, Email)}\n        >\n          Sell\n        </button>\n        <button\n          style={{ display: 'none' }}\n          className='submit'\n          onClick={(e) => putItemUpForSale(e, description, Email)}\n        >\n          Stick with this\n        </button>\n      </div>\n      <div style={{ display: 'none' }} className='img-box'></div>\n      {/* </div> */}\n    </body>\n  );\n};\n\nexport default Sell;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,OAAO,QAAQ,gBAAgB;AAExC,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,IAAI,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,MAAMC,WAAW,GAAG,MAAOC,GAAG,IAAK;EACjC;EACA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC;EAC5C,IAAIC,MAAM,GAAGH,IAAI,CAACI,aAAa,CAAC,UAAU,CAAC;EAE3C,IAAID,MAAM,CAACE,KAAK,CAACC,OAAO,KAAK,MAAM,EAAE;IACnCH,MAAM,CAACE,KAAK,CAACC,OAAO,GAAG,OAAO;IAC9BH,MAAM,CAACI,OAAO,CACZ,CAAC;MAAEC,SAAS,EAAE;IAAW,CAAC,EAAE;MAAEA,SAAS,EAAE;IAAW,CAAC,CAAC,EACtD,IACF,CAAC;EACH;EAEA,MAAMC,OAAO,GAAGN,MAAM,CAACC,aAAa,CAAC,KAAK,CAAC;EAC3C,IAAIK,OAAO,EAAEA,OAAO,CAACC,MAAM,CAAC,CAAC;EAE7B,MAAMC,GAAG,GAAGV,QAAQ,CAACW,aAAa,CAAC,KAAK,CAAC;EACzCD,GAAG,CAACN,KAAK,CAACQ,MAAM,GAAG,MAAM;EACzBF,GAAG,CAACN,KAAK,CAACS,QAAQ,GAAG,MAAM;EAC3BH,GAAG,CAACI,GAAG,GAAG,MAAMhB,GAAG,CAACiB,IAAI,CAAC,CAAC;EAE1Bb,MAAM,CAACc,WAAW,CAACN,GAAG,CAAC;EAEvB,IAAIO,IAAI,GAAGlB,IAAI,CAACmB,gBAAgB,CAAC,QAAQ,CAAC;EAC1C,MAAMC,aAAa,GAAGF,IAAI,CAAC,CAAC,CAAC;EAC7B,MAAMG,OAAO,GAAGH,IAAI,CAAC,CAAC,CAAC;EAEvB,MAAMI,EAAE,GAAGtB,IAAI,CAACI,aAAa,CAAC,IAAI,CAAC;EACnC,IAAIkB,EAAE,EAAE;IACNA,EAAE,CAACZ,MAAM,CAAC,CAAC;IAEX,MAAMa,KAAK,GAAGvB,IAAI,CAACI,aAAa,CAAC,OAAO,CAAC;IAEzC,MAAMoB,EAAE,GAAGvB,QAAQ,CAACW,aAAa,CAAC,IAAI,CAAC;IACvCY,EAAE,CAACC,WAAW,GACZ,4UAA4U;IAC9UzB,IAAI,CAAC0B,YAAY,CAACF,EAAE,EAAED,KAAK,CAAC;IAE5BH,aAAa,CAACK,WAAW,GAAG,WAAW;IACvCJ,OAAO,CAAChB,KAAK,CAACC,OAAO,GAAG,OAAO;EACjC;AACF,CAAC;AAED,MAAMqB,gBAAgB,GAAGA,CAACC,CAAC,EAAEC,WAAW,EAAEC,KAAK,KAAK;EAClDC,KAAK,CACH,wEAAwE,EACxE;IACEC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDjC,IAAI,EAAEkC,IAAI,CAACC,SAAS,CAAC;MACnBC,IAAI,EAAE;QAAEC,WAAW,EAAER;MAAY,CAAC;MAClCS,KAAK,EAAER;IACT,CAAC;EACH,CACF,CAAC,CACES,IAAI,CAAExC,GAAG,IAAKD,WAAW,CAACC,GAAG,CAAC,CAAC,CAC/ByC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;AACzC,CAAC;AAED,MAAMG,gBAAgB,GAAGA,CAAChB,CAAC,EAAEC,WAAW,EAAEC,KAAK,KAAK;EAClD,MAAMnB,GAAG,GAAGV,QAAQ,CAACG,aAAa,CAAC,sBAAsB,CAAC;EAC1D2B,KAAK,CACH,wEAAwE,EACxE;IACEC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDjC,IAAI,EAAEkC,IAAI,CAACC,SAAS,CAAC;MACnBC,IAAI,EAAE;QAAEC,WAAW,EAAER,WAAW;QAAEgB,MAAM,EAAElC,GAAG,CAACI;MAAI,CAAC;MACnDuB,KAAK,EAAER;IACT,CAAC;EACH,CACF,CAAC,CACES,IAAI,CAAExC,GAAG,IAAK;IACbA,GAAG,CAACiB,IAAI,CAAC,CAAC,CAACuB,IAAI,CAAEvB,IAAI,IAAK;MACxB0B,OAAO,CAACC,GAAG,CAAC3B,IAAI,CAAC;IACnB,CAAC,CAAC;EACJ,CAAC,CAAC,CACDwB,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;AACzC,CAAC;AAED,MAAMK,IAAI,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjBzD,SAAS,CAAC,MAAM;IACdW,QAAQ,CAAC+C,KAAK,GAAG,gBAAgB;EACnC,CAAC,CAAC;EACF,MAAMC,OAAO,GAAG1D,MAAM,CAAC,IAAI,CAAC;EAE5B,MAAM2D,IAAI,GAAGzD,OAAO,CAAC,CAAC;EACtB,MAAM;IAAE6C;EAAM,CAAC,GAAGY,IAAI;EAEtB,MAAM,CAACrB,WAAW,EAAEsB,cAAc,CAAC,GAAG3D,QAAQ,CAAC,EAAE,CAAC;EAElD,oBACEK,OAAA;IAAMuD,EAAE,EAAC,MAAM;IAAAC,QAAA,gBACbxD,OAAA,CAACH,OAAO;MAACuD,OAAO,EAAEA;IAAQ;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC7B5D,OAAA,CAACF,IAAI;MAAC+D,GAAG,EAAET;IAAQ;MAAAK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAEtB5D,OAAA;MAAAwD,QAAA,EAAI;IAAyB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAClC5D,OAAA;MACE8D,KAAK,EAAE9B,WAAY;MACnB+B,QAAQ,EAAGhC,CAAC,IAAK;QACfuB,cAAc,CAACvB,CAAC,CAACiC,MAAM,CAACF,KAAK,CAAC;MAChC;IAAE;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eACF5D,OAAA;MAAKiE,SAAS,EAAC,SAAS;MAAAT,QAAA,gBACtBxD,OAAA;QACEiE,SAAS,EAAC,QAAQ;QAClBC,OAAO,EAAGnC,CAAC,IAAKD,gBAAgB,CAACC,CAAC,EAAEC,WAAW,EAAES,KAAK,CAAE;QAAAe,QAAA,EACzD;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACT5D,OAAA;QACEQ,KAAK,EAAE;UAAEC,OAAO,EAAE;QAAO,CAAE;QAC3BwD,SAAS,EAAC,QAAQ;QAClBC,OAAO,EAAGnC,CAAC,IAAKgB,gBAAgB,CAAChB,CAAC,EAAEC,WAAW,EAAES,KAAK,CAAE;QAAAe,QAAA,EACzD;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eACN5D,OAAA;MAAKQ,KAAK,EAAE;QAAEC,OAAO,EAAE;MAAO,CAAE;MAACwD,SAAS,EAAC;IAAS;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAEvD,CAAC;AAEX,CAAC;AAACV,EAAA,CA1CID,IAAI;EAAA,QAMKrD,OAAO;AAAA;AAAAuE,EAAA,GANhBlB,IAAI;AA4CV,eAAeA,IAAI;AAAC,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}